{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nvar Layer = forwardRef(function (props, ref) {\n  var animate = props.animate,\n      animation = props.animation;\n\n  var _useState = useState(),\n      originalFocusedElement = _useState[0],\n      setOriginalFocusedElement = _useState[1];\n\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n\n  var _useState2 = useState(),\n      layerContainer = _useState2[0],\n      setLayerContainer = _useState2[1];\n\n  useEffect(function () {\n    return setLayerContainer(getNewContainer());\n  }, []); // just a few things to clean up when the Layer is unmounted\n\n  useEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          document.body.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = document.getElementById('layerClone');\n\n            if (clone) {\n              document.body.removeChild(clone);\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else {\n          document.body.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, layerContainer, originalFocusedElement]);\n  return layerContainer ? createPortal(React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nvar LayerDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  LayerDoc = require('./doc').doc(Layer); // eslint-disable-line global-require\n}\n\nvar LayerWrapper = LayerDoc || Layer;\nexport { LayerWrapper as Layer };","map":{"version":3,"sources":["C:/compare-app/node_modules/grommet/es6/components/Layer/Layer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useEffect","useState","createPortal","getNewContainer","LayerContainer","animationDuration","Layer","props","ref","animate","animation","_useState","originalFocusedElement","setOriginalFocusedElement","document","activeElement","_useState2","layerContainer","setLayerContainer","focus","setTimeout","parentNode","activeAnimation","undefined","layerClone","cloneNode","id","body","appendChild","clonedContainer","querySelector","style","animationDirection","clone","getElementById","removeChild","remove","createElement","displayName","LayerDoc","process","env","NODE_ENV","require","doc","LayerWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nvar Layer = forwardRef(function (props, ref) {\n  var animate = props.animate,\n      animation = props.animation;\n\n  var _useState = useState(),\n      originalFocusedElement = _useState[0],\n      setOriginalFocusedElement = _useState[1];\n\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n\n  var _useState2 = useState(),\n      layerContainer = _useState2[0],\n      setLayerContainer = _useState2[1];\n\n  useEffect(function () {\n    return setLayerContainer(getNewContainer());\n  }, []); // just a few things to clean up when the Layer is unmounted\n\n  useEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          document.body.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = document.getElementById('layerClone');\n\n            if (clone) {\n              document.body.removeChild(clone);\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else {\n          document.body.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, layerContainer, originalFocusedElement]);\n  return layerContainer ? createPortal(React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nvar LayerDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  LayerDoc = require('./doc').doc(Layer); // eslint-disable-line global-require\n}\n\nvar LayerWrapper = LayerDoc || Layer;\nexport { LayerWrapper as Layer };"]},"metadata":{},"sourceType":"module"}